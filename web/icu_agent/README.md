# ICU Agent 智能重症监护助手

基于 Blueprint 设计的 ICU 智能助手网页应用，提供病人监控、风险预警、医患对话等功能。

## 功能特性

- **病人管理**: 选择和切换病人，查看病人基本信息
- **风险预警**: 实时显示病人风险评估和预测
- **事件监控**: 时间轴显示病人医疗事件和体征变化
- **智能对话**: 与ICU Agent进行临床问题咨询
- **工作流透明化**: 显示Agent的思考和处理过程
- **响应式布局**: 支持桌面和移动设备

## 技术架构

### 前端
- **HTML5 + CSS3**: 使用现代CSS变量系统
- **原生JavaScript**: 无框架依赖，纯JS实现
- **响应式设计**: 适配不同屏幕尺寸

### 后端
- **Python Flask**: 轻量级Web框架
- **RESTful API**: 标准化接口设计
- **模拟数据**: 内置患者和临床数据

## 安装和运行

### 1. 安装依赖

在项目根目录运行：
```bash
cd web/icu_agent
pip install -r requirements.txt
```

### 2. 启动后端服务

```bash
# 使用项目的run.bat（推荐）
./run.bat app.py

# 或者直接运行
python app.py
```

后端服务将在 http://localhost:5000 启动

### 3. 打开前端页面

用浏览器打开 `index.html` 文件，或者通过本地服务器访问：

```bash
# 使用Python内置服务器
python -m http.server 8080
```

然后访问 http://localhost:8080

## API接口

### 聊天接口
```
POST /api/chat
{
    "patient_id": 1,
    "message": "患者当前的血压情况如何？"
}
```

### 患者数据
```
GET /api/patient/{patient_id}
GET /api/patient/{patient_id}/risks
GET /api/patient/{patient_id}/events
```

### 健康检查
```
GET /api/health
```

## 使用说明

1. **选择病人**: 点击"请点击此处选择或搜索病人"按钮
2. **浏览病人**: 在展开的面板中选择一位病人
3. **查看监控**: 左侧边栏显示风险预警和事件序列
4. **开始对话**: 在中央区域输入问题与Agent交互
5. **观察工作流**: 右侧边栏显示Agent的处理过程
6. **切换病人**: 点击"切换病人"按钮选择其他病人

## 界面布局

```
+--------------------------------------------------+
| [全局标题栏: Logo, 系统名, 状态, 用户信息]        |
+--------------------------------------------------+
| [病人中心栏: 病人选择/当前病人信息]               |
+--------------------------------------------------+
| [左栏] | [中央对话区域]           | [右栏工作流]  |
| 风险   |                          |             |
| 事件   |     医患交互对话          | Agent流程   |
| 监控   |                          |             |
+--------------------------------------------------+
```

## 模拟数据

系统内置以下模拟病人数据：
- 张某某 (A-101床) - 急性心肌梗死
- 李某某 (A-102床) - 急性呼吸窘迫综合征
- 王某某 (B-201床) - 糖尿病酮症酸中毒
- 陈某某 (B-202床) - 脑出血
- 刘某某 (C-301床) - 感染性休克

## 开发说明

- 所有代码遵循中文注释，输出使用英文
- 使用项目统一的日志系统 agent_engine.agent_logger
- 前端使用原生JavaScript，便于维护和扩展
- 后端API设计遵循RESTful规范
- 响应式设计支持移动端访问
