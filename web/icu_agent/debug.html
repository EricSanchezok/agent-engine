<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ICU Agent Debug - 调试版本</title>
    <link rel="stylesheet" href="index.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="bg-background text-foreground">
    <div style="position: fixed; top: 10px; right: 10px; z-index: 1000; background: red; color: white; padding: 10px; border-radius: 5px;">
        <div id="debugInfo">Debug Info</div>
    </div>

    <!-- Simplified header for debugging -->
    <header class="header">
        <div class="header-content">
            <div class="header-left">
                <div class="logo">🏥</div>
                <div class="header-title">
                    <h1>ICU Agent (Debug)</h1>
                </div>
            </div>
        </div>
    </header>

    <!-- Patient Hub Bar -->
    <div class="patient-hub-bar" id="patientHubBar">
        <div class="patient-hub-content" id="patientHubContent">
            <!-- State 1: No patient selected -->
            <div class="patient-hub-empty" id="patientHubEmpty">
                <button class="select-patient-btn" id="selectPatientBtn">
                    <span>🔍 点击测试选择病人功能</span>
                </button>
            </div>

            <!-- State 2: Patient selected -->
            <div class="patient-hub-selected hidden" id="patientHubSelected">
                <div class="current-patient-info">
                    <div class="patient-avatar">
                        <span id="patientInitials">张</span>
                    </div>
                    <div class="patient-details">
                        <h3 id="patientName">张某某</h3>
                        <span class="patient-meta">
                            <span id="patientBed">床号: A-101</span>
                            <span class="separator">•</span>
                            <span id="patientRisk" class="risk-level medium">中风险</span>
                        </span>
                    </div>
                </div>
                <button class="switch-patient-btn" id="switchPatientBtn">
                    切换病人
                </button>
            </div>
        </div>

        <!-- Patient Selection Panel -->
        <div class="patient-selection-panel hidden" id="patientSelectionPanel">
            <div class="panel-header">
                <div class="search-box">
                    <span>🔍</span>
                    <input type="text" placeholder="搜索病人..." id="patientSearchInput">
                </div>
                <button class="close-panel-btn" id="closePanelBtn">❌</button>
            </div>
            <div class="patient-list" id="patientList">
                <!-- Patient cards will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Debug JavaScript -->
    <script>
        console.log("Debug script started");
        
        // Add debug info
        const debugInfo = document.getElementById('debugInfo');
        function updateDebug(msg) {
            debugInfo.innerHTML = `Status: ${msg}<br>Time: ${new Date().toLocaleTimeString()}`;
            console.log('Debug:', msg);
        }
        
        updateDebug('Script loaded');

        // Test if DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            updateDebug('DOM loaded');
            
            // Test button click
            const btn = document.getElementById('selectPatientBtn');
            if (btn) {
                updateDebug('Button found');
                btn.addEventListener('click', function() {
                    updateDebug('Button clicked!');
                    alert('按钮点击测试成功！');
                    
                    // Test panel toggle
                    const panel = document.getElementById('patientSelectionPanel');
                    if (panel.classList.contains('hidden')) {
                        panel.classList.remove('hidden');
                        panel.classList.add('active');
                        updateDebug('Panel opened');
                    } else {
                        panel.classList.add('hidden');
                        panel.classList.remove('active');
                        updateDebug('Panel closed');
                    }
                });
            } else {
                updateDebug('Button NOT found!');
            }
            
            // Test close button
            const closeBtn = document.getElementById('closePanelBtn');
            if (closeBtn) {
                closeBtn.addEventListener('click', function() {
                    updateDebug('Close button clicked');
                    const panel = document.getElementById('patientSelectionPanel');
                    panel.classList.add('hidden');
                    panel.classList.remove('active');
                });
            }
        });
    </script>
</body>
</html>
